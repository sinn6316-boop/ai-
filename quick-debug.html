<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„±ê²© í…ŒìŠ¤íŠ¸ ì§„ë‹¨</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 10px 20px; margin: 10px; border: none; border-radius: 5px; cursor: pointer; }
        .btn-test { background: #007bff; color: white; }
        .btn-check { background: #28a745; color: white; }
        .log { background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 5px; height: 300px; overflow-y: auto; }
    </style>
</head>
<body>
    <h1>ğŸ”§ ì„±ê²© í…ŒìŠ¤íŠ¸ ì§„ë‹¨ ë„êµ¬</h1>
    
    <button class="btn-check" onclick="checkData()">1ï¸âƒ£ ë°ì´í„° í™•ì¸</button>
    <button class="btn-check" onclick="checkClasses()">2ï¸âƒ£ í´ë˜ìŠ¤ í™•ì¸</button>
    <button class="btn-test" onclick="testDirectStart()">3ï¸âƒ£ ì§ì ‘ í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
    <button class="btn-test" onclick="startPersonalityTest()">4ï¸âƒ£ ìœ í‹¸ë¦¬í‹°ë¡œ í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
    
    <div class="log" id="log"></div>
    
    <!-- ì‹¤ì œ ì„±ê²© í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="assets/js/data.js"></script>
    <script src="assets/js/personality-test.js"></script>
    <script src="assets/js/config.js"></script>
    <script src="assets/js/test-utils.js"></script>
    
    <!-- ì „ì—­ ë³€ìˆ˜ ì•ˆì „ í• ë‹¹ -->
    <script>
        if (typeof personalityQuestions !== 'undefined') {
            window.personalityQuestions = personalityQuestions;
        }
        if (typeof PersonalityTest !== 'undefined') {
            window.PersonalityTest = PersonalityTest;
        }
    </script>
    
    <!-- ê°€ì§œ DOM ìš”ì†Œë“¤ -->
    <div id="test-intro" style="display: none;">í…ŒìŠ¤íŠ¸ ì†Œê°œ ì„¹ì…˜</div>
    <div id="test-section" style="display: none;">
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
            <span class="progress-text" id="progress-text">1/20</span>
        </div>
        <div class="question-container">
            <div class="question-header">
                <i id="question-icon" class="fas fa-question"></i>
                <h2 id="question-text">í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</h2>
            </div>
            <div class="answers-container" id="answers-container">
                <!-- ë‹µë³€ ì˜µì…˜ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>
    <div id="result-section" style="display: none;">ê²°ê³¼ ì„¹ì…˜</div>
    
    <script>
        const logDiv = document.getElementById('log');
        
        function log(message) {
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${time}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[${time}] ${message}`);
        }
        
        function checkData() {
            log('=== ë°ì´í„° í™•ì¸ ì‹œì‘ ===');
            
            // personalityQuestions í™•ì¸
            const globalQuestions = typeof personalityQuestions !== 'undefined';
            const windowQuestions = typeof window.personalityQuestions !== 'undefined';
            
            log(`personalityQuestions (ì „ì—­): ${globalQuestions ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}`);
            log(`window.personalityQuestions: ${windowQuestions ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}`);
            
            if (globalQuestions) {
                log(`ì§ˆë¬¸ ê°œìˆ˜ (ì „ì—­): ${personalityQuestions.length}ê°œ`);
                log(`ì²« ë²ˆì§¸ ì§ˆë¬¸: ${personalityQuestions[0].question}`);
            }
            
            if (windowQuestions) {
                log(`ì§ˆë¬¸ ê°œìˆ˜ (window): ${window.personalityQuestions.length}ê°œ`);
            }
        }
        
        function checkClasses() {
            log('=== í´ë˜ìŠ¤ í™•ì¸ ì‹œì‘ ===');
            
            const globalClass = typeof PersonalityTest !== 'undefined';
            const windowClass = typeof window.PersonalityTest !== 'undefined';
            
            log(`PersonalityTest (ì „ì—­): ${globalClass ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}`);
            log(`window.PersonalityTest: ${windowClass ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}`);
            
            // ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í…ŒìŠ¤íŠ¸
            try {
                const TestClass = window.PersonalityTest || PersonalityTest;
                const instance = new TestClass();
                log('âœ… PersonalityTest ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì„±ê³µ');
                log(`startTest ë©”ì„œë“œ: ${typeof instance.startTest === 'function' ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}`);
            } catch (error) {
                log(`âŒ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹¤íŒ¨: ${error.message}`);
            }
        }
        
        function testDirectStart() {
            log('=== ì§ì ‘ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            try {
                const TestClass = window.PersonalityTest || PersonalityTest;
                const instance = new TestClass();
                
                log('ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì™„ë£Œ, startTest í˜¸ì¶œ...');
                instance.startTest();
                log('âœ… startTest í˜¸ì¶œ ì™„ë£Œ');
                
            } catch (error) {
                log(`âŒ ì§ì ‘ í…ŒìŠ¤íŠ¸ ì‹œì‘ ì‹¤íŒ¨: ${error.message}`);
                console.error('ìƒì„¸ ì˜¤ë¥˜:', error);
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ìë™ í™•ì¸
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸŸ¢ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            setTimeout(() => {
                checkData();
                checkClasses();
            }, 1000);
        });
    </script>
</body>
</html>